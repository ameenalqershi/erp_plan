# قواعد التحقق – المخزون والمستودعات

---

## 1. تحقق الكمية (الاستلام/الصرف/التحويل)
- لا يسمح بصرف كمية أكبر من المتوفر.
- تحقق من صلاحية الدفعة/تاريخ الصلاحية عند الصرف.
- تحقق من عدم تكرار الرقم التسلسلي (serial) في المخزون.

## 2. تحقق المواقع الداخلية
- يجب التحقق من مواقع التخزين (location) إذا كان النظام يدعمها.
- لا يسمح بإدخال صنف لموقع غير مخصص له أو موقوف.

## 3. تحقق الأذونات
- لا يسمح بإجراء حركة مخزون إلا لمستخدم لديه صلاحية على المخزن/الفرع.

## 4. تحقق تسويات الجرد
- عند تسوية جرد: لا يمكن تسوية صنف محجوز إلا بعد فك الحجز.
- لا يسمح بتسوية سلبية إذا كان المخزون بالسالب غير مفعل.

## 5. تحقق التحويل بين المخازن
- لا يسمح بتحويل صنف لمخزن موقوف أو غير مفعل.
- تحقق من الصنف والكمية في كلا المخزنين.

## 6. تحقق انتهاء الصلاحية
- لا تصرف أصناف منتهية الصلاحية.
- تنبيه عند الاقتراب من انتهاء الصلاحية حسب إعدادات النظام.

## 7. تحقق من التكرار
- لا يسمح بتكرار نفس السطر (صنف/دفعة/موقع) في نفس الحركة.

## 8. تحقق الربط مع العمليات التجارية
- لا يسمح بإلغاء أو تعديل حركة مخزون مرتبطة بفاتورة/طلب شراء/تجميع إلا عبر العملية الأصلية أو حسب صلاحية خاصة.

---