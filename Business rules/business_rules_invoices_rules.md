# قواعد التحقق – الفواتير والمبيعات

---

## 1. التحقق من الكميات في المخزون
- يجب التأكد من توفر الكميات المطلوبة في المخزون وقت الحفظ (item, warehouse, batch, serial).
- يمنع الحفظ إذا كانت الكمية المطلوبة أكبر من المتاح/المتاح للحجز.
- في حال تفعيل "السحب السالب" يمكن السماح فقط ضمن حد معين.

## 2. تحقق أسعار البيع والخصومات
- لا يسمح بتجاوز الحد الأدنى للسعر أو الحد الأعلى للخصم إلا بصلاحية أو موافقة.
- تحقق من صلاحية العروض/الأسعار الخاصة سارية.

## 3. تحقق حالة العميل/الزبون
- لا يسمح بإصدار فاتورة لعميل موقوف أو تجاوز حد الائتمان.
- تحقق من سريان حالة الضريبة للعميل إذا كانت الفاتورة خاضعة للضريبة.

## 4. تحقق تواريخ الفاتورة
- تاريخ الفاتورة يجب أن يكون في فترة مالية “نشطة” وغير مغلقة.
- لا يسمح بفاتورة بتاريخ مستقبلي إلا بصلاحية خاصة.

## 5. تحقق الضرائب والرسوم
- احتساب الضريبة حسب نوع العميل/الصنف/العملية.
- تحقق من صحة نسبة الضريبة ومطابقتها للضوابط الحكومية.

## 6. تحقق رقم الفاتورة
- رقم الفاتورة فريد وغير مكرر لكل نوع فاتورة/فرع/سنة.

## 7. تحقق المرفقات/الموافقات
- إذا كان نوع الفاتورة يتطلب مستند (عطاء، أمر شراء، تسليم)، يجب إرفاقه.
- تحقق من مرور الفاتورة بمسار الموافقة الإلكتروني إن وجد.

## 8. تحقق الربط مع المخزون
- في حالة "فاتورة صرف" يجب توليد حركة مخزون وربط الحركة بالكمية/الدفعة/الرقم التسلسلي.

## 9. تحقق من حالة الفاتورة
- يمنع التعديل أو الإلغاء بعد الاعتماد أو الربط مع النظام الضريبي/الحكومي (ZATCA، E-Invoice).

## 10. تحقق من ربط السداد
- عند حفظ فاتورة آجلة يجب ربطها بحساب العميل وضمان عدم تجاوز الرصيد المسموح به.

---